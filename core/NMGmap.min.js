/**
 * Plugin Name: Nomanic Objects
 * Plugin URI: http://www.nomanic.biz/NMObjects/
 * Description: A Charting and Interface Package
 * Version: 4.75
 * Author: Neil Oman
 * Author URI: http://www.nomanic.biz/
 * License: Envato Split License with GPL (see text file)
 *
 * Copyright 2018  Nomanic  (email : nomanic99@gmail.com)
 *
 * Basically free for non-commercial use only.
 * If you wish to buy a license, please visit my website.
 */
"use strict";function Cloud(t){return t&&(this.opts=t,this.opts.size=this.opts.size?this.opts.size:36,this.opts.icons=this.opts.icons?this.opts.icons:[32,38,39,41,44],this.getPosition=function(){return new google.maps.LatLng(this.opts.position.lat,this.opts.position.lng)}),this.draw=function(){this.div;if(!this.div){var t=NomanicObject.ob("b98"+this.opts.NMC.pid).children[2];t.innerHTML+='<IMG src="'+NomanicObject.urlpath+"ims/"+this.opts.icons[Math.floor(Math.random()*this.opts.icons.length)]+'.png" style="position:absolute;margin-left:'+-this.opts.size/2+"px;margin-top:"+-this.opts.size/2+"px;width:"+this.opts.size+"px;height:"+this.opts.size+'px;"/>',this.div=t.children[t.children.length-1]}this.div.style.left=this.opts.x+"%",this.div.style.top=this.opts.y+"%"},this.draw(),this}function CustomMarker(t){this.setValues(t),this.opts=t,this.opts.size=this.opts.data.size,this.getPosition=function(){return new google.maps.LatLng(this.opts.position.lat,this.opts.position.lng)}}function markersetup(){CustomMarker.prototype=new google.maps.OverlayView,CustomMarker.prototype.draw=function(){var t,e=this,o=this.div;o||(this.div=document.createElement("div"),(o=this.div).innerHTML='<div class="shadow"></div><div class="pulse"></div><div class="pin-wrap"><div class="pin"></div></div>',this.pinWrap=this.div.getElementsByClassName("pin-wrap"),this.pin=this.div.getElementsByClassName("pin"),(t=this.pin[0]).innerHTML='<IMG src="'+(this.opts.icon.url?this.opts.icon.url:this.opts.icon)+'" style="width:'+this.opts.size+"px;height:"+this.opts.size+'px;"/>',t.style.position="absolute",t.style.width=-this.opts.size+"px",t.style.height=-this.opts.size+"px",this.pinShadow=this.div.getElementsByClassName("shadow"),o.style.position="absolute",o.style.width=-this.opts.size+"px",o.style.height=-this.opts.size+"px",o.style.cursor="pointer",t.style.marginLeft=-this.opts.size/2+"px",t.style.marginTop=-this.opts.size+"px",this.opts.icon.anchor&&(t.style.marginLeft=-this.opts.icon.anchor.x+"px",t.style.marginTop=-this.opts.icon.anchor.y+"px"),this.getPanes().overlayImage.appendChild(o),google.maps.event.addDomListener(o,"click",function(t){google.maps.event.trigger(e,"click",t)}));var a=this.getProjection().fromLatLngToDivPixel(this.getPosition());a&&(o.style.left=a.x+"px",o.style.top=a.y+"px")}}var NomanicGmap={prop:.95,ref:"child",setSelect:function(t,e){-1!=t.selx&&t.markersim[t.selx]&&t.markers[t.selx].setIcon(t.markersim[t.selx]),t.selx=e,t.markershg[this.f]&&t.markers[this.f].setIcon(t.markershg[this.f]),1==t.vis1&&(t.directionsDisplay.setMap(null),o=NomanicObject.ob("b98"+t.pid).children[1],t.layout.showbuttons>3&&(o.children[3].style.opacity=0),t.vis1=0),NomanicGmap.fitToMarkers(this.NMC,this.f);t.onselect&&t.onselect(t,t.selx);return NomanicObject.objs[t.id]=t,t},dep:function(){moment().format()},setup:function(){NomanicGmap.mback=new Image,NomanicGmap.mback.src="data:image/png;base64,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",NomanicObject.register("NomanicGmap.create",["gmap"]),NomanicObject.addscript([["https://maps.googleapis.com/maps/api/js?key="+NomanicKeys.Google_Maps+"&libraries=places",0]]),NomanicObject.addtype(NomanicGmap)},parsebase:function(t,e,o){var a,i,s,n,r,c=NomanicObject.splitter(e);for(t.plot.scalarx=1,t.plot.scalary=1,t.plot.scalex=1,t.plot.scaley=1,t.layout.center=[0,0],t.layout.zoom=6,n=0;n<c.length;n++)switch((r=c[n].split("|"))[1]=r[1]?r[1]:1,r[0]){case"showzoom":t.layout.showzoom=1;break;case"showstreet":t.layout.showstreet=1;break;case"showbuttons":t.layout.showbuttons=r[1]%5;break;case"select":t.layout.select=parseInt(r[1]);break;case"style":t.layout.style=NomanicObject.stripq(r[1]);break;case"center":t.layout.center=NomanicObject.gary(NomanicObject.stripq(r[1]));break;case"zoom":t.layout.zoom=parseInt(r[1]);break;case"weather":t.layout.weather=parseInt(r[1]),r[2]&&(t.layout.weathersz=parseInt(r[2])),r[3]&&(t.layout.weathericons=NomanicObject.gary(r[3]));break;case"home":t.layout.home=NomanicObject.stripq(r[1]);break;case"lightbox":t.layout.lightbox=NomanicObject.stripq(r[1])}if((t=NomanicObject.parsebase(t,e,o)).container.hasAttribute("data"))for(s=NomanicObject.splitter(t.container.getAttribute("data"),"{","}"),n=0;n<s.length;n++)for(t.plot.data[n]={},t.plot.data[n].size=48,c=NomanicObject.splitter(s[n]),i=0;i<c.length;i++)switch((r=c[i].split("|"))[1]=r[1]?r[1]:1,r[0]){case"image":t.plot.data[n].icon=NomanicObject.stripq(r[1]);break;case"size":t.plot.data[n].size=parseInt(r[1]);break;case"pulse":t.plot.data[n].pulse=1;break;case"anchor":t.plot.data[n].anchor=NomanicObject.gary(NomanicObject.stripq(r[1]));break;case"address":t.plot.data[n].address=NomanicObject.stripq(r[1]);break;case"latlng":t.plot.data[n].latlng=NomanicObject.gary(NomanicObject.stripq(r[1]));break;case"icon":t.plot.data[n].image=NomanicObject.stripq(r[1]);break;case"colors":for(r=NomanicObject.stripc(NomanicObject.stripq(r[1])),t.plot.data[n].colors=[],t.plot.data[n].high=[],a=0;a<r.length;a++)t.plot.data[n].colors[a]=NomanicObject.stripq(r[a]),t.plot.data[n].high[a]=NomanicObject.stripq(r[a]);break;case"high":for(r=NomanicObject.stripc(NomanicObject.stripq(r[1])),a=0;a<r.length;a++)t.plot.data[n].high[a]=NomanicObject.stripq(r[a])}if(t.plot.home={},t.plot.home.size=48,t.container.hasAttribute("home"))for(s=NomanicObject.splitter(t.container.getAttribute("home"),"{","}"),c=NomanicObject.splitter(s[0]),i=0;i<c.length;i++)switch((r=c[i].split("|"))[1]=r[1]?r[1]:1,r[0]){case"image":t.plot.home.icon=NomanicObject.stripq(r[1]);break;case"size":t.plot.home.size=parseInt(r[1]);break;case"pulse":t.plot.home.pulse=1;break;case"anchor":t.plot.home.anchor=NomanicObject.gary(NomanicObject.stripq(r[1]));break;case"address":t.plot.home.address=NomanicObject.stripq(r[1]);break;case"latlng":t.plot.home.latlng=NomanicObject.gary(NomanicObject.stripq(r[1]));break;case"icon":t.plot.home.image=NomanicObject.stripq(r[1]);break;case"colors":for(r=NomanicObject.stripc(NomanicObject.stripq(r[1])),t.plot.home.colors=[],t.plot.home.high=[],a=0;a<r.length;a++)t.plot.home.colors[a]=NomanicObject.stripq(r[a]),t.plot.home.high[a]=NomanicObject.stripq(r[a]);break;case"high":for(r=NomanicObject.stripc(NomanicObject.stripq(r[1])),a=0;a<r.length;a++)t.plot.home.high[a]=NomanicObject.stripq(r[a])}return t},codeAddress:function(t,e,o){(new google.maps.Geocoder).geocode({address:o},function(o,a){a==google.maps.GeocoderStatus.OK&&(t.setter--,t.markersp[e]=[o[0].geometry.location.lat(),o[0].geometry.location.lng()],0===t.setter&&NomanicGmap.follow(t))})},getowner:function(t){switch(t.layout.type){case"gmap":return NomanicGmap}return!1},makemarkericon:function(t,e,o){var a=new Image,i=t.plot.data[e].size,s=document.createElement("canvas");a.onload=function(){s.setAttribute("width",i),s.setAttribute("height",i),s.getContext("2d").drawImage(this,0,0,i,i),t.plot.data[e].anchor?t.markersim[e]={anchor:new google.maps.Point(t.plot.data[e].anchor[0],t.plot.data[e].anchor[1]),url:s.toDataURL("image/png")}:t.markersim[e]=s.toDataURL("image/png"),t.setter--,0===t.setter&&NomanicGmap.follow(t)},a.src=NomanicObject.urlpath+"assets/"+(o||"blank.png")},makemarker:function(t,e,o,a,i,s){var n,r,c,l=new Image,p=t.plot.data[e].size,m=p/80,h=document.createElement("canvas"),g=document.createElement("canvas"),u=document.createElement("canvas");l.onload=function(){h.setAttribute("width",p),h.setAttribute("height",p),n=h.getContext("2d"),g.setAttribute("width",p),g.setAttribute("height",p),r=g.getContext("2d"),u.setAttribute("width",p),u.setAttribute("height",p),c=u.getContext("2d"),n.fillStyle=a[0],n.arc(40*m,35*m,25*m,0,2*Math.PI),n.fill(),r.drawImage(NomanicGmap.mback,0,0,p,p),r.globalCompositeOperation="source-in",r.fillStyle=a[1],r.fillRect(0,0,p,p),c.drawImage(this,21*m,15*m,40*m,40*m),c.globalCompositeOperation="source-in",c.rect(0,0,p,p),c.fillStyle=a[2],c.fill();var i=new Image;i.onload=function(){n.drawImage(this,0,0,p,p);var a=new Image;a.onload=function(){n.drawImage(this,0,0,p,p),s?t.markerhome=h.toDataURL("image/png"):(o?t.markershg:t.markersim)[e]=h.toDataURL("image/png"),t.setter--,0===t.setter&&NomanicGmap.follow(t)},a.src=u.toDataURL("image/png")},i.src=g.toDataURL("image/png")},l.src=NomanicObject.urlpath+"assets/"+(i||"blank.png")},loadMap:function(t){t.layout.style?NomanicObject.postAjax(NomanicObject.urlpath+"assets/"+t.layout.style,[t],function(t,e){NomanicGmap.drawMap(e[0],JSON.parse(t))}):NomanicGmap.drawMap(t)},fitToMarkers:function(t,e,o){var a=new google.maps.LatLngBounds;if(e||0===e){var i=t.markers[e].getPosition();a.extend(i)}else for(var s in t.markers){i=t.markers[s].getPosition();a.extend(i)}if(t.homem&&t.vis){i=t.homem.getPosition();a.extend(i)}if(a.getNorthEast().equals(a.getSouthWest())){var n=new google.maps.LatLng(a.getNorthEast().lat()+.01,a.getNorthEast().lng()+.01),r=new google.maps.LatLng(a.getNorthEast().lat()-.01,a.getNorthEast().lng()-.01);a.extend(n),a.extend(r)}t.map.fitBounds(a),(e||0===e)&&t.map.setCenter(t.markers[e].getPosition()),o&&t.layout.weather&&NomanicGmap.populate(t,t.layout.weather,t.layout.weathersz,t.layout.weathericons)},populate:function(t,e,o,a){var i,s;for(t.clouds=[],i=0;i<e;i++)s={x:Math.random()*(100/e)+i*(100/e),y:100*Math.random(),NMC:t,map:t.map},o&&(s.size=o),a&&(s.icons=a),t.clouds.push(new Cloud(s));google.maps.event.addListener(t.map,"bounds_changed",function(){var e;for(e=0;e<t.clouds.length;e++)t.clouds[e].draw()})},getradius:function(t){var e=t.map.getBounds(),o=e.getCenter(),a=e.getNorthEast(),i=o.lat()/57.2958,s=o.lng()/57.2958,n=a.lat()/57.2958,r=a.lng()/57.2958;return 3963*Math.acos(Math.sin(i)*Math.sin(n)+Math.cos(i)*Math.cos(n)*Math.cos(r-s))*.5},drawMap:function(t,e){var o,a,i="",s={lat:t.layout.center[0],lng:t.layout.center[1]},n={zoom:t.layout.zoom,center:s,panControl:!0,zoomControl:!!t.layout.showzoom,scrollwheel:!1,mapTypeControl:!1,scaleControl:!!t.layout.showzoom,streetViewControl:!!t.layout.showstreet,overviewMapControl:!0,rotateControl:!0};for(e&&(n.styles=e),(a=NomanicObject.ob("b98"+t.pid)).innerHTML='<div class="blk w100 h100"></div><div class="blk"></div><div class="blk w100 h100" style="pointer-events:none;"></div>',a.style.pointerEvents="auto",t.map=new google.maps.Map(a.children[0],n),markersetup(),o=0;o<t.markersp.length;o++)t.plot.data[o].pulse?t.markers.push(new CustomMarker({position:{lat:t.markersp[o][0],lng:t.markersp[o][1]},icon:t.markersim[o],map:t.map,data:t.plot.data[o]})):t.plot.data[o].colors?t.markers.push(new google.maps.Marker({position:{lat:t.markersp[o][0],lng:t.markersp[o][1]},icon:o!=t.selx?t.markersim[o]:t.markershg[o],map:t.map})):t.plot.data[o].icon?t.markers.push(new google.maps.Marker({position:{lat:t.markersp[o][0],lng:t.markersp[o][1]},icon:t.markersim[o],map:t.map})):t.markers.push(new google.maps.Marker({position:{lat:t.markersp[o][0],lng:t.markersp[o][1]},map:t.map})),t.markers[o].NMC=t,t.markers[o].f=o+1-1,t.markers[o].addListener("click",function(){NomanicGmap.setSelect(this.NMC,this.f)});NomanicGmap.fitToMarkers(t,!1,1),a=NomanicObject.ob("b98"+t.pid).children[1],t.layout.showbuttons>0&&(i+='<img class="gbut Gooey_object" src="'+NomanicObject.urlpath+'ims/gmapzoom.png" style="float:left;margin-left:6px;margin-top:6px;cursor:pointer;"/>'),t.layout.showbuttons>1&&(i+='<img class="gbut Gooey_object" src="'+NomanicObject.urlpath+'ims/gmaphome.png" style="float:left;margin-left:6px;margin-top:6px;cursor:pointer;"/>'),t.layout.showbuttons>2&&(i+='<img class="gbut Gooey_object" src="'+NomanicObject.urlpath+'ims/gmapcar.png" style="float:left;margin-left:3px;margin-top:6px;cursor:pointer;"/>'),t.layout.showbuttons>3&&(i+='<img class="gbut Gooey_object" src="'+NomanicObject.urlpath+'ims/gmaproute.png" style="opacity:0;float:left;margin-left:3px;margin-top:6px;cursor:pointer;"/>'),a.innerHTML=i;var r=a.getElementsByClassName("gbut");t.layout.showbuttons>0&&(r[0].NMC=t,r[0].addEventListener("click",function(){var t=this.NMC;NomanicGmap.fitToMarkers(t)})),t.layout.showbuttons>1&&(r[1].NMC=t,r[1].addEventListener("click",function(){var t=this.NMC;t.homem&&(t.vis=1-t.vis,t.showhome(t,t.vis))})),t.layout.showbuttons>2&&(r[2].NMC=t,r[2].addEventListener("click",function(){var t=this.NMC;t.showroute(t.vis1)})),t.layout.showbuttons>3&&(r[3].NMC=t,r[3].addEventListener("click",function(){this.NMC.popup()}));var c=t;return navigator.geolocation&&"https:"==location.protocol?navigator.geolocation.getCurrentPosition(function(t){NomanicGmap.showhome(c,t)},function(t){NomanicGmap.showhomeip(t,c)},{maximumAge:5e4,timeout:2e4,enableHighAccuracy:!0}):NomanicGmap.jsonp("http://ipinfo.io",function(t){NomanicGmap.showhome(c,{coords:{latitude:parseFloat(t.loc.split(",")[0]),longitude:parseFloat(t.loc.split(",")[1])}})}),t},jsonp:function(t,e){var o="jsonp_callback_"+Math.round(1e5*Math.random());window[o]=function(t){delete window[o],document.body.removeChild(a),e(t)};var a=document.createElement("script");a.src=t+(t.indexOf("?")>=0?"&":"?")+"callback="+o,document.body.appendChild(a)},showhomeip:function(t,e){switch(t.code){case t.TIMEOUT:console.log("Browser geolocation error !\n\nTimeout.");break;case t.PERMISSION_DENIED:0==t.message.indexOf("Only secure origins are allowed")&&NomanicGmap.tryAPIGeolocation(e);break;case t.POSITION_UNAVAILABLE:console.log("Browser geolocation error !\n\nPosition unavailable.")}},tryAPIGeolocation:function(t){var e=t;NomanicObject.postAjax("https://www.googleapis.com/geolocation/v1/geolocate?key="+NomanicKeys.Google_Maps,[],function(t){NomanicGmap.showhome(e,{coords:{latitude:t.location.lat,longitude:t.location.lng}})},1)},showhome:function(t,e){t.homem=new google.maps.Marker({position:{lat:e.coords.latitude,lng:e.coords.longitude},icon:NomanicGmap.markerhome,draggable:!0,map:t.map}),google.maps.event.addListener(t.homem,"dragstart",function(){t.directionsDisplay.setMap(null);var e=NomanicObject.ob("b98"+t.pid).children[1];t.layout.showbuttons>3&&(e.children[3].style.opacity=0),t.vis1=0}),t.homem.setVisible(!1),t.directionsService=new google.maps.DirectionsService,t.directionsDisplay=new google.maps.DirectionsRenderer({map:t.map,suppressMarkers:!0,polylineOptions:{strokeColor:t.layout.home?t.layout.home:"#3E82F7"}}),NomanicObject.objs[t.id]=t,NomanicObject.processThem()},displayRoute:function(t){t.directionsDisplay.setMap(t.map),t.directionsService.route({origin:t.homem.getPosition(),destination:t.markers[t.selx].getPosition(),waypoints:[],travelMode:google.maps.TravelMode.DRIVING,avoidTolls:!0},function(e,o){if(o===google.maps.DirectionsStatus.OK){t.directionsDisplay.setDirections(e);var a,i=NomanicObject.ob("b98"+t.pid).children[1],s=t.directionsDisplay.getDirections().routes[0];for(t.layout.showbuttons>3&&(i.children[3].style.opacity=1),t.vis1=1,t.txtDir=[],a=0;a<s.legs[0].steps.length;a++)t.txtDir.push(s.legs[0].steps[a].instructions)}})},showroute:function(t,e){var o,a,i,s,n,r="";for(r+='<div class="datatable blk w100 h100" style="background:#454545;overflow:hidden;font-family:Cabin;"><div class="scrollercont" style="position:absolute;width:16px;top:1px;right:1px;background:#AAA;"><div class="scroller" style="position:absolute;width:100%;background:url('+NomanicObject.urlpath+'ims/scry_1.gif);cursor:pointer;"><img src="'+NomanicObject.urlpath+'ims/scry_0.gif" class="blk"/><img src="'+NomanicObject.urlpath+'ims/scry_2.gif" class="blk" style="bottom:0px;"/></div></div><div class="scrollerpane" style="position:absolute;width:calc(100% - 18px);height:auto;">',n=0;n<e.length;n++)r+='<div style="float:left;width:100%;height:auto;"><div style="float:left;width:40px;height:auto;"><span style="float:right;margin-top:4px;margin-right:10px;text-align:right;">'+(n+1)+"</span></div>",r+='<div style="float:left;width: calc(100% - 40px);height:auto;"><span style="float:left;margin-top:4px;margin-bottom:4px;text-align:left;">'+e[n]+"</span></div></div>";r+="</div></div>",t.innerHTML=r,(a=t.getElementsByClassName("scrollercont")[0]).style.height=t.offsetHeight-2+"px",i=t.getElementsByClassName("scroller")[0],s=t.getElementsByClassName("scrollerpane")[0],o=(o=a.offsetHeight/s.offsetHeight)>1?1:o,i.style.height=100*o+"%",new Draggabilly(i,{containment:!0}).on("dragMove",function(t,e,o){var a,i=this.element.parentNode,s=i.parentNode.children[1];a=this.position.y/(i.offsetHeight-this.element.offsetHeight),s.style.top=-a*(s.offsetHeight-i.offsetHeight)+"px"})},create:function(t){var e;for(t.markersim=[],t.markershg=[],t.markersp=[],t.markers=[],t.pts=0,t.selx=t.layout.select?t.layout.select:0,t.vis1=0,t.setter=0,t.plot.home.colors?(t.setter++,NomanicGmap.makemarker(t,0,0,t.plot.home.colors,t.plot.home.image,1)):t.plot.home.icon?(t.setter++,NomanicGmap.makemarkericon(t,0,t.plot.home.icon)):t.markerhome=!1,e=0;e<t.plot.data.length;e++)t.plot.data[e].latlng?t.markersp[e]=t.plot.data[e].latlng:(t.pts++,t.setter++,NomanicGmap.codeAddress(t,e,t.plot.data[e].address)),t.plot.data[e].colors?(t.setter+=2,NomanicGmap.makemarker(t,e,0,t.plot.data[e].colors,t.plot.data[e].image),NomanicGmap.makemarker(t,e,1,t.plot.data[e].high,t.plot.data[e].image)):t.plot.data[e].icon?(t.setter++,NomanicGmap.makemarkericon(t,e,t.plot.data[e].icon)):(t.markershg[e]=!1,t.markersim[e]=!1);0===t.plot.data.length&&NomanicGmap.follow(t)},follow:function(t){var e=t;return setTimeout(function(){var t=e;if((t=NomanicObject.createbefore(t)).vis=0,t.rsr=NomanicObject.rsr,t.loadlegend=function(t){return t},t.updateaxis=function(t){return t},t.redraw=function(t){return t},t.showdata=function(t){return t},t.addClicks=function(t){return t},t.setselect=function(t){return NomanicGmap.setSelect(e,t)},t.getselect=function(){return e.selx},t.attach=function(t,o){return NomanicObject.attacher(e,t,o)},t.fitToMarkers=function(){NomanicGmap.fitToMarkers(e)},t.showhome=function(t){var o,a=e;a.homem&&(a.vis=t,a.homem.setVisible(!!a.vis),o=NomanicObject.ob("b98"+a.pid).children[1],0===a.vis&&(a.directionsDisplay.setMap(null),a.vis1=0,a.layout.showbuttons>3&&(o.children[3].style.opacity=a.vis)),a.layout.showbuttons>2&&(o.children[2].style.opacity=a.vis),a.fitToMarkers(),NomanicObject.objs[a.id]=a)},t.showroute=function(t){var o,a=e;a.vis1=t,0===a.vis1?NomanicGmap.displayRoute(a):(a.directionsDisplay.setMap(null),o=NomanicObject.ob("b98"+a.pid).children[1],a.layout.showbuttons>3&&(o.children[3].style.opacity=0),a.vis1=0),NomanicObject.objs[a.id]=a},t.getroute=function(){return e.txtDir?e.txtDir:[]},t.popup=function(){var t=NomanicObject.ob(e.layout.lightbox),o=NomanicObject.vsz(),a=[o[0]/2,window.pageYOffset+o[1]/2];NomanicObject.openlightbox(t,a,t.prt,!1,function(t){NomanicObject.ob("b98"+t.pid).style.pointerEvents="auto",NomanicGmap.showroute(NomanicObject.ob("b98"+t.pid),e.txtDir)})},t.layout.gtype=1,t.layout.subtype=1,t.mtype=1,!(t=NomanicObject.loadlayout(t)).objects.wrapper)return t;switch(t.canvasratio=t.objects.graph.offsetWidth/t.objects.graph.offsetHeight,t.plot.donut=t.plot.donut?t.plot.donut:0,t.plot.donuty=t.plot.donuty?t.plot.donuty:.8,t.layout.type){case"gmap":t.mtype=2,t.ctype=1,t.layout.showscroll=1}t.czoom=100,t=NomanicObject.createafter(t),t=NomanicObject.finally(t),t=NomanicGmap.loadMap(t)},50),t}};NomanicGmap.setup();